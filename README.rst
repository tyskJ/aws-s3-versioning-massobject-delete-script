.. image:: ./doc/001samune.png

==========================================================================================
S3バージョニングのおさらいと大量オブジェクトクリーンアップスクリプト
==========================================================================================

* `こちらの記事 <https://qiita.com/tyskJ/items/3080139637ca47ee2436>`_ のスクリプトを格納しています

フォルダ構成
============
* `こちら <./folder.md>`_ を参照

各種ファイルの使用方法
======================
前提条件
--------------
* shellが実行できる環境であること
* *AWS CLI* がインストールされていること
* *jq* (JSON プロセッサーツール) がインストールされていること

.. note::

  * ローカルPCから実行する際は、各種ファイル内のAWS CLIコマンドにプロファイルを追記して実行してください

*createfile.sh*
-----------------
1. スクリプトが格納されているディレクトリにて実行

.. code-block:: bash

  ./createfile.sh

2. プロンプトより各種情報を入力

.. csv-table::

  "入力内容", "例", "概要"
  "バケット名", "bucket-name", "対象のバケット名を入力"
  "プレフィックス" "Test", "作成したいプレフィックスを入力。省略も可能。"
  "ファイル数", "5", "指定したバケットに格納するファイル数"

* 上記の場合、 *s3://bucket-name/Test/* 配下に5個テキストファイルが格納される

*delete-objects.sh*
---------------------
1. スクリプトが格納されているディレクトリにて実行
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

.. code-block:: bash

  ./delete-objects.sh bucket-name

* 対象のバケット名を第一引数として入力し実行する

2. 削除対象のプレフィックス or バケット配下全てのいずれかを選択
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
* プロンプトにて指定したバケット内のプレフィックス一覧及びバケット直下全てのオブジェクトを削除するかの選択が表示される
* 各数字が割り振られているため、指定の数字を入力する
